(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{336:function(t,e,n){"use strict";n.r(e),n.d(e,"BankPage",(function(){return w}));n(115),n(117),n(118),n(137),n(39),n(337),n(338),n(78),n(340),n(37),n(123),n(120),n(121),n(38),n(66),n(124),n(343),n(344),n(63),n(345),n(64);var a=n(178),r=n(7),i=n.n(r),o=n(350),s=n(125),c=n(148),l=n(217),u=n(40),d=n(126);function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){return!e||"object"!==h(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t,e,n){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var a=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=m(t)););return t}(t,e);if(a){var r=Object.getOwnPropertyDescriptor(a,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function b(t,e,n){return e&&v(t.prototype,e),n&&v(t,n),t}function x(t){return"After ".concat(t," seconds, the page will automatically jump to the next section")}var _=function(){function t(){g(this,t),this._margin={top:12,right:100,bottom:30,left:50},this._width=420,this._height=420,this._xRoundBands=.5,this._xValue=function(t){return t[0]},this._yValue=function(t){return t[1]},this._xScale=a.scale.ordinal(),this._yScale=a.scale.linear(),this._yAxis=a.svg.axis().scale(this._yScale).orient("left"),this._xAxis=a.svg.axis().scale(this._xScale)}return b(t,[{key:"init",value:function(t){var e=this;t.each((function(t){var n=t.map((function(t){return t[0]}));t=t.map((function(n,a){return[e._xValue.call(t,n,a),e._yValue.call(t,n,a)]})),e._xScale.domain(t.map((function(t){return t[0]}))).rangeRoundBands([0,e._width-e._margin.left-e._margin.right],e._xRoundBands),e._yScale.domain([-.75,.25]).range([e._height-e._margin.top-e._margin.bottom,0]).nice();var r=a.select(this).selectAll("svg").data([t]),i=r.enter().append("svg").append("g");i.append("g").attr("class","bars"),i.append("g").attr("class","y axis"),i.append("g").attr("class","x axis"),r.attr("width",e._width).attr("height",e._height);var o=r.select(".bars").selectAll(".bar").data(t);o.enter().append("rect"),o.exit().remove(),o.attr("class",(function(t){return t[1]<0?"bar negative":"bar positive"})).attr("x",(function(t){return e.X(t)})).attr("y",(function(t){return t[1]<0?e.Y0():e.Y(t)})).attr("width",e._xScale.rangeBand()).attr("height",(function(t){return Math.abs(e.Y(t)-e.Y0())})),r.selectAll("text").data(t).enter().append("text").text((function(t){return"$ ".concat(t[1].toFixed(2))})).attr("x",(function(t){return e.X(t)+e._margin.left})).attr("y",(function(t){var n=Math.abs(e.Y(t)-e.Y0());return 0===t[1]?e.Y(t):t[1]<0?n+e.Y0()+30:e.Y(t)})).style("font-size","8px");var s=r.select("g").attr("transform","translate("+e._margin.left+","+e._margin.top+")");s.select(".x.axis").attr("transform","translate(0,"+e.Y0()+")").call(e._xAxis.tickValues(n).tickFormat((function(t){return t})).tickSize(6).outerTickSize(0)).selectAll("text").style("font-size","12px").style("opacity","0.7"),s.select(".y.axis").call(e._yAxis.tickValues(["",-.75,-.5,-.25,0,.25,""]).tickFormat((function(t){return"".concat(t)})).tickSize(6).outerTickSize(0)).selectAll("text").style("font-size","12px").style("opacity","0.7"),i.append("text").attr("class","x label").attr("text-anchor","end").attr("transform","translate(".concat(e._width-e._margin.right+30,", ").concat(e.Y0()+2,")")).style("font-size","10px").text("Question Number"),i.append("text").attr("class","y label").attr("text-anchor","begin").attr("transform","translate(2, ".concat(e._height-e._margin.top-e._margin.bottom+20,")")).style("font-size","10px").text("Earning per question")}))}},{key:"X",value:function(t){return this._xScale(t[0])}},{key:"Y0",value:function(){return this._yScale(0)}},{key:"Y",value:function(t){return this._yScale(t[1])}},{key:"margin",value:function(t){return arguments.length?(this._margin=t,this):this._margin}},{key:"width",value:function(t){return arguments.length?(this._width=t,this):this._width}},{key:"height",value:function(t){return arguments.length?(this._height=t,this):this._height}},{key:"x",value:function(t){return arguments.length?(this._xValue=t,this):this._xValue}},{key:"y",value:function(t){return arguments.length?(this._yValue=t,this):this._yValue}}]),t}(),w=function(t){function e(t,n,a){var r;return g(this,e),(r=f(this,m(e).call(this,t))).elements=t,r.data=n,r.lastIndex=a,r.elements.buttonElem.hide(),u.a.isShowBank(r.data.Type)&&r.renderBank(),r.renderTimeCountDown(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(e,t),b(e,[{key:"renderBank",value:function(){this.elements.textElem.append(Object(d.e)("Bank Results"));var t=this.data.RoundRewardsHistory.map((function(t){return[t.questionNumber,t.amount]}));this.elements.graphElem.append(i()('<div id="bank-vis"></div>')),a.select("#bank-vis").datum(t).call((function(t){var e=new _;e.width(window.innerWidth/2),e.height(window.innerHeight/2),e.x((function(t){return t[0]})),e.y((function(t){return t[1]})),e.init(t)}));var e=this.data.RoundRewardsHistory.reduce((function(t,e){return t+e.amount}),0);this.elements.graphElem.append(Object(d.d)("Summary")).append(Object(d.b)("Net reward from this round: ".concat(e.toFixed(2)))).append(Object(d.b)("Previous bank balance: ".concat(this.data.TotalBankBalance))).append(Object(d.b)("Total Reward from all completed rounds: ".concat((e+this.data.TotalBankBalance).toFixed(2)))).append(i()("<hr>"))}},{key:"renderTimeCountDown",value:function(){var t=this,e=i()('<div class="timer-indicator"><div class="loading"></div></div>'),n=i()('<div class="timer-countdown"></div>'),a=Object(d.d)("Please do not switch to another web page or desktop application");n.html(x(c.a.breakDuration));var r=i()('<div class="timer-wrapper"></div>');r.append(n).append(e),this.elements.graphElem.append(a).append(r);var s=new o.Timer;s.start({countdown:!0,startValues:{seconds:c.a.breakDuration}}),s.addEventListener("secondsUpdated",(function(){var t=s.getTimeValues().toString().split(":"),e=t[t.length-1];n.html(x(e))})),s.addEventListener("targetAchieved",(function(){r.remove(),a.remove(),t.elements.buttonElem.trigger("click"),t.elements.buttonElem.show()}))}},{key:"canProceed",value:function(){return!0}},{key:"record",value:function(){this.data.TotalBankBalance+=this.data.RoundRewardsHistory.reduce((function(t,e){return t+e.amount}),0),this.data.RoundRewardsHistory=[]}},{key:"nextElement",value:function(){var t=this;return p(m(e.prototype),"clearPage",this).call(this),this.lastIndex===l.a.length-1?n.e(1).then(n.bind(null,351)).then((function(e){return new e.EndPage(t.elements,t.data)})):Promise.resolve().then(n.bind(null,250)).then((function(e){return new e.QuestionPage(t.elements,t.data,t.lastIndex+1)}))}}]),e}(s.a)}}]);